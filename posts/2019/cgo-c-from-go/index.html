<!doctype html>
<html lang="en"><head>
    <title>Cgo: Calling C From Go</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="../../../css/theme.css"/>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-150288366-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>
<body>
        <div id="content" class="mx-auto"><header class="container mt-sm-5 mt-4 mb-4 mt-xs-1">
    <div class="row">
        <div class="col-sm-4 col-12 text-sm-right text-center pt-3 pb-1 pt-sm-4">
            <a href="../../../" class="text-decoration-none">
                <img id="home-image" class="rounded-circle" src="../../../images/me.jpeg"
                     alt="Austin Gebauer Personal Image">
            </a>
        </div>
        <div class="col-sm-8 col-12 text-sm-left text-center">
            <h2 class="m-0 mb-2 mt-4">
                <a href="../../../" class="text-decoration-none text-dark">
                    Austin Gebauer
                </a>
            </h2>
            <p class="text-muted mb-1">
                Software Engineer | NGINX | Seattle, WA
            </p>
            <ul id="nav-links" class="list-inline mb-2">
                
                
                    <li class="list-inline-item">
                        <a class="badge badge-white " href="../../../about/" title="About">About</a>
                    </li>
                
                    <li class="list-inline-item">
                        <a class="badge badge-white active" href="../../../posts/" title="Posts">Posts</a>
                    </li>
                
                    <li class="list-inline-item">
                        <a class="badge badge-white " href="../../../categories/" title="Categories">Categories</a>
                    </li>
                
            </ul>
            <ul id="nav-social" class="list-inline">
                <li class="list-inline-item mr-3">
                    <a href="https://github.com/austingebauer" target="_blank">
                        <i class="fab fa-github fa-1x text-muted"></i>
                    </a>
                </li>
                <li class="list-inline-item mr-3">
                    <a href="https://www.linkedin.com/in/austingebauer" target="_blank">
                        <i class="fab fa-linkedin-in fa-1x text-muted"></i>
                    </a>
                </li>
                <li class="list-inline-item mr-3">
                    <a href="https://twitter.com/austingebauer" target="_blank">
                        <i class="fab fa-twitter fa-1x text-muted"></i>
                    </a>
                </li>
                <li class="list-inline-item mr-3">
                    <a href="mailto:gebauer.austin@gmail.com">
                        <i class="fas fa-at fa-1x text-muted"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <hr />
</header>
<div class="container">
    <div class="pl-sm-2">
        <div class="row">
            <div class="col-12 col-sm-6 pb-2">
                <a href="http://austingebauer.com/posts/2019/cgo-c-from-go/">Published November 22, 2019</a>
            </div>
            <div class="col-12 col-sm-6 pb-2">
                
                    <small><a href="../../../tags/go">#Go</a></small>
                
            </div>
        </div>

        <h3>Cgo: Calling C From Go</h3>
        

        <article>
            <p>TODO: in progress</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#080;font-style:italic">// package tuple
</span><span style="color:#080;font-style:italic"></span><span style="color:#000080;font-weight:bold">package</span> tuple
<span style="color:#000080;font-weight:bold">import</span> (
	<span style="color:#00f">&#34;errors&#34;</span>
	<span style="color:#00f">&#34;log&#34;</span>
	<span style="color:#00f">&#34;github.com/austingebauer/go-ray-tracer/math&#34;</span>
)
<span style="color:#000080;font-weight:bold">const</span> (
	vector <span style="color:#000080;font-weight:bold">float64</span> = <span style="color:#00f">0.0</span>
	point  <span style="color:#000080;font-weight:bold">float64</span> = <span style="color:#00f">1.0</span>
)
<span style="color:#080;font-style:italic">// tuple represents a point or a vector in a left-handed coordinate system
</span><span style="color:#080;font-style:italic"></span><span style="color:#000080;font-weight:bold">type</span> tuple <span style="color:#000080;font-weight:bold">struct</span> {
	<span style="color:#080;font-style:italic">// x, y, and z represent components in a left-handed coordinate system
</span><span style="color:#080;font-style:italic"></span>	x, y, z <span style="color:#000080;font-weight:bold">float64</span>
	<span style="color:#080;font-style:italic">// w indicates whether this tuple represents a point or a vector
</span><span style="color:#080;font-style:italic"></span>	<span style="color:#080;font-style:italic">// If the value of w is 0.0, then it represents a vector
</span><span style="color:#080;font-style:italic"></span>	<span style="color:#080;font-style:italic">// If the value of w is 1.0, then it represents a point
</span><span style="color:#080;font-style:italic"></span>	w <span style="color:#000080;font-weight:bold">float64</span>
}
<span style="color:#080;font-style:italic">// NewPoint returns a new tuple that has the passed x, y, and z values.
</span><span style="color:#080;font-style:italic"></span><span style="color:#000080;font-weight:bold">func</span> NewPoint(x, y, z <span style="color:#000080;font-weight:bold">float64</span>) *tuple {
	tpl, err := newTuple(x, y, z, point)
	<span style="color:#000080;font-weight:bold">if</span> err != <span style="color:#000080;font-weight:bold">nil</span> {
		log.Fatal(err)
	}
	<span style="color:#000080;font-weight:bold">return</span> tpl
}
<span style="color:#080;font-style:italic">// NewVector returns a new tuple that has the passed x, y, and z values.
</span><span style="color:#080;font-style:italic"></span><span style="color:#000080;font-weight:bold">func</span> NewVector(x, y, z <span style="color:#000080;font-weight:bold">float64</span>) *tuple {
	tpl, err := newTuple(x, y, z, vector)
	<span style="color:#000080;font-weight:bold">if</span> err != <span style="color:#000080;font-weight:bold">nil</span> {
		log.Fatal(err)
	}
	<span style="color:#000080;font-weight:bold">return</span> tpl
}
<span style="color:#080;font-style:italic">// Equals returns true if the passed tuple is equal to this tuple.
</span><span style="color:#080;font-style:italic">// Two Tuples are equal if their x, y, z, and w members are equal.
</span><span style="color:#080;font-style:italic"></span><span style="color:#000080;font-weight:bold">func</span> Equals(tpl1, tpl2 *tuple) <span style="color:#000080;font-weight:bold">bool</span> {
	<span style="color:#000080;font-weight:bold">return</span> math.Float64Equals(tpl1.x, tpl2.x, math.Epsilon) &amp;&amp;
		math.Float64Equals(tpl1.y, tpl2.y, math.Epsilon) &amp;&amp;
		math.Float64Equals(tpl1.z, tpl2.z, math.Epsilon) &amp;&amp;
		math.Float64Equals(tpl1.w, tpl2.w, math.Epsilon)
}
<span style="color:#080;font-style:italic">// Add creates and returns a new tuple by adding the corresponding components of each of the passed Tuples.
</span><span style="color:#080;font-style:italic"></span><span style="color:#000080;font-weight:bold">func</span> Add(tpl1, tpl2 *tuple) (*tuple, <span style="color:#000080;font-weight:bold">error</span>) {
	<span style="color:#000080;font-weight:bold">if</span> tpl1.w+tpl2.w == (point + point) {
		<span style="color:#000080;font-weight:bold">return</span> <span style="color:#000080;font-weight:bold">nil</span>, errors.New(<span style="color:#00f">&#34;error: cannot add two point tuples&#34;</span>)
	}
	<span style="color:#000080;font-weight:bold">return</span> newTuple(tpl1.x+tpl2.x, tpl1.y+tpl2.y, tpl1.z+tpl2.z, tpl1.w+tpl2.w)
}
<span style="color:#080;font-style:italic">// newTuple returns a new tuple that has the passed x, y, z, and w values.
</span><span style="color:#080;font-style:italic">// This function is private in order to make the public interface for
</span><span style="color:#080;font-style:italic">// a tuple explicitly a point or a vector.
</span><span style="color:#080;font-style:italic"></span><span style="color:#000080;font-weight:bold">func</span> newTuple(x, y, z, w <span style="color:#000080;font-weight:bold">float64</span>) (*tuple, <span style="color:#000080;font-weight:bold">error</span>) {
	<span style="color:#000080;font-weight:bold">if</span> w != vector &amp;&amp; w != point {
		<span style="color:#000080;font-weight:bold">return</span> <span style="color:#000080;font-weight:bold">nil</span>, errors.New(<span style="color:#00f">&#34;error: w must be either 0.0 or 1.0&#34;</span>)
	}
	<span style="color:#000080;font-weight:bold">return</span> &amp;tuple{
		x: x,
		y: y,
		z: z,
		w: w,
	}, <span style="color:#000080;font-weight:bold">nil</span>
}</code></pre></td></tr></table>
</div>
</div>
        </article>
    </div>

            </div>
        </div><footer class="text-center">
    <small class="text-muted">
        &copy; Copyright 2019, Austin Gebauer
    </small>
</footer>
</body>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</html>
